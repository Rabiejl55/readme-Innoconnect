<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
<<<<<<< HEAD
    <title>Gestion des Décaissements - Argon Dashboard</title>

    <!-- Fonts et icônes -->
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700"
      rel="stylesheet"
    />
    <link
      href="https://demos.creative-tim.com/argon-dashboard-pro/assets/css/nucleo-icons.css"
      rel="stylesheet"
    />
    <link
      href="https://demos.creative-tim.com/argon-dashboard-pro/assets/css/nucleo-svg.css"
      rel="stylesheet"
    />
    <script
      src="https://kit.fontawesome.com/42d5adcbca.js"
=======
    
    <script
      src="https://kit.fontawesome.com/42d5adcbca.js"
      
>>>>>>> 06b9c94 (second)
      crossorigin="anonymous"
    ></script>

    <!-- CSS -->
    <link
      id="pagestyle"
      href="../assets/css/argon-dashboard.css?v=2.1.0"
      rel="stylesheet"
    />
    <style>
      #decaissementsTable th {
        background-color: #5e72e4;
        color: white;
      }
      #decaissementsTable td {
        vertical-align: middle;
      }
      .form-popup {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 9999;
      }
      .form-group {
        margin-bottom: 1rem;
      }
      .section-content {
        display: none;
      }
      .active {
        background-color: #f0f0f0;
      }
    </style>
  </head>

  <body class="g-sidenav-show bg-gray-100">
    <div class="min-height-300 bg-dark position-absolute w-100"></div>
    <!-- Sidebar -->
    <aside
      class="sidenav bg-white navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-4"
      id="sidenav-main"
    >
      <div class="sidenav-header">
        <h4 class="text-dark text-center py-3">Tableau de Bord</h4>
      </div>
      <hr class="horizontal dark mt-0" />
      <div class="collapse navbar-collapse w-auto" id="sidenav-collapse-main">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="#" onclick="showSection('dashboard')">
              <i class="fas fa-chart-line text-primary"></i>
              <span class="nav-link-text ms-2">Dashboard</span>
            </a>
          </li>
          <li class="nav-item">
            <a
              class="nav-link"
              href="Encaissements.html"
              onclick="showSection('encaissements')"
            >
              <i class="fas fa-file-invoice-dollar text-danger"></i>
              <span class="nav-link-text ms-2">Encaissements</span>
            </a>
          </li>
          <li class="nav-item">
            <a
              class="nav-link active"
              href="Decaissements.html"
              onclick="showSection('decaissements')"
            >
              <i class="fas fa-users text-warning"></i>
              <span class="nav-link-text ms-2">Décaissements</span>
            </a>
          </li>
          <li class="nav-item">
            <a
              class="nav-link"
              href="TresorerieFinale.html"
              onclick="showSection('tresorerie')"
            >
              <i class="fas fa-cogs text-info"></i>
              <span class="nav-link-text ms-2">Trésorerie Finale</span>
            </a>
          </li>
        </ul>
      </div>
    </aside>

    <!-- Contenu principal -->
    <main class="main-content position-relative border-radius-lg">
      <nav
        class="navbar navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl"
        id="navbarBlur"
        data-scroll="false"
      ></nav>

      <div class="container-fluid py-4">
        <div class="row">
          <div class="col-12">
            <!-- Section Dashboard -->
            <div id="dashboard" class="section-content">
              <h6>Dashboard Content</h6>
            </div>

            <!-- Section Encaissements -->
            <div id="encaissements" class="section-content">
              <h6>Encaissements Content</h6>
            </div>

            <!-- Section Décaissements -->
            <div
              id="decaissements"
              class="section-content"
              style="display: block"
            >
<<<<<<< HEAD
              <div class="card mb-4">
                <div class="card-header pb-0">
                  <h6>Gestion des Décaissements</h6>
                  <button
                    class="btn btn-danger btn-sm ms-2"
                    onclick="openForm()"
                  >
                    + Ajouter Décaissement
                  </button>
                </div>
                <div class="card-body px-0 pt-0 pb-2">
                  <div class="form-group mb-4">
                    <label for="searchInput">Rechercher :</label>
                    <input
                      type="text"
                      class="form-control"
                      id="searchInput"
                      placeholder="Rechercher par ID, Type..."
                      oninput="filterTable()"
                    />
                  </div>
=======
              
               
>>>>>>> 06b9c94 (second)
                  <div class="table-responsive p-0">
                    <table
                      class="table align-items-center mb-0"
                      id="decaissementsTable"
                    >
<<<<<<< HEAD
                      <thead>
                        <tr>
                          <th>ID</th>
                          <th>Date</th>
                          <th>Montant (€)</th>
                          <th>Type</th>
                          <th>Actions</th>
                        </tr>
                      </thead>
                      <tbody></tbody>
=======
                      
                     
>>>>>>> 06b9c94 (second)
                    </table>
                  </div>
                </div>
              </div>
            </div>

            <!-- Section Trésorerie Finale -->
            <div id="tresorerie" class="section-content">
              <h6>Trésorerie Finale Content</h6>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Modal pour Ajouter Décaissement -->
    <div
      class="modal fade"
      id="decaissementModal"
      tabindex="-1"
      role="dialog"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalTitle">Ajouter Décaissement</h5>
            <button
              type="button"
              class="btn-close"
              onclick="closeForm()"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <label for="id" class="form-control-label">ID</label>
              <input class="form-control" type="text" id="id" required />
            </div>
            <div class="form-group">
              <label for="date" class="form-control-label">Date</label>
              <input class="form-control" type="date" id="date" required />
            </div>
            <div class="form-group">
              <label for="montant" class="form-control-label"
                >Montant (€)</label
              >
              <input
                class="form-control"
                type="number"
                id="montant"
                step="0.01"
                required
              />
            </div>
            <div class="form-group">
              <label for="type" class="form-control-label">Type</label>
              <select class="form-control" id="type" required>
                <option value="Paiement Fournisseur">
                  Paiement Fournisseur
                </option>
                <option value="Salaires">Salaires</option>
                <option value="Autres">Autres</option>
              </select>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              onclick="closeForm()"
            >
              Annuler
            </button>
            <button
              type="button"
              class="btn btn-danger"
              onclick="saveDecaissement()"
            >
              Enregistrer
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- JS -->
    <script src="../assets/js/core/popper.min.js"></script>
    <script src="../assets/js/core/bootstrap.min.js"></script>
    <script src="../assets/js/plugins/perfect-scrollbar.min.js"></script>
    <script src="../assets/js/plugins/smooth-scrollbar.min.js"></script>

    <script>
      let decaissements = [];
      let currentEditIndex = -1;

      function showSection(sectionId) {
        // Masquer toutes les sections
        const sections = document.querySelectorAll(".section-content");
        sections.forEach((section) => {
          section.style.display = "none";
        });

        // Afficher la section correspondante
        document.getElementById(sectionId).style.display = "block";

        // Mettre à jour la classe active de la sidebar
        const navLinks = document.querySelectorAll(".nav-link");
        navLinks.forEach((link) => {
          link.classList.remove("active");
        });

        // Ajouter la classe active à l'élément correspondant
        const activeLink = document.querySelector(
          `[onclick="showSection('${sectionId}')"]`
        );
        activeLink.classList.add("active");
      }

      function openForm() {
        var modal = new bootstrap.Modal(
          document.getElementById("decaissementModal")
        );
        modal.show();
        document.getElementById("modalTitle").innerText =
          "Ajouter Décaissement";
        currentEditIndex = -1;
        resetForm();
      }

      function closeForm() {
        var modal = bootstrap.Modal.getInstance(
          document.getElementById("decaissementModal")
        );
        modal.hide();
      }

      function resetForm() {
        document.getElementById("id").value = "";
        document.getElementById("date").value = "";
        document.getElementById("montant").value = "";
        document.getElementById("type").value = "Paiement Fournisseur";
      }

      function saveDecaissement() {
        const decaissement = {
          id: document.getElementById("id").value,
          date: document.getElementById("date").value,
          montant: parseFloat(document.getElementById("montant").value).toFixed(
            2
          ),
          type: document.getElementById("type").value,
        };

        if (currentEditIndex === -1) {
          decaissements.push(decaissement);
        } else {
          decaissements[currentEditIndex] = decaissement;
        }
        refreshTable();
        closeForm();
      }

      function refreshTable() {
        const tbody = document.querySelector("#decaissementsTable tbody");
        tbody.innerHTML = "";
        decaissements.forEach((e, i) => {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${e.id}</td>
            <td>${e.date}</td>
            <td>${e.montant}</td>
            <td>${e.type}</td>
            <td>
              <button class="btn btn-link text-primary" onclick="editDecaissement(${i})"><i class="fas fa-pencil-alt me-2"></i>Modifier</button>
              <button class="btn btn-link text-danger" onclick="deleteDecaissement(${i})"><i class="fas fa-trash-alt me-2"></i>Supprimer</button>
            </td>`;
          tbody.appendChild(row);
        });
      }

      function editDecaissement(index) {
        currentEditIndex = index;
        const e = decaissements[index];
        document.getElementById("modalTitle").innerText =
          "Modifier Décaissement";
        document.getElementById("id").value = e.id;
        document.getElementById("date").value = e.date;
        document.getElementById("montant").value = e.montant;
        document.getElementById("type").value = e.type;
        var modal = new bootstrap.Modal(
          document.getElementById("decaissementModal")
        );
        modal.show();
      }

      function deleteDecaissement(index) {
        if (confirm("Voulez-vous vraiment supprimer ce décaissement ?")) {
          decaissements.splice(index, 1);
          refreshTable();
        }
      }

      function filterTable() {
        const input = document.getElementById("searchInput");
        const filter = input.value.toLowerCase();
        const table = document.getElementById("decaissementsTable");
        const rows = table.getElementsByTagName("tr");

        for (let i = 1; i < rows.length; i++) {
          const cells = rows[i].getElementsByTagName("td");
          let found = false;

          for (let j = 0; j < cells.length; j++) {
            if (cells[j]) {
              if (cells[j].innerText.toLowerCase().includes(filter)) {
                found = true;
                break;
              }
            }
          }

          rows[i].style.display = found ? "" : "none";
        }
      }
    </script>
  </body>
</html>
