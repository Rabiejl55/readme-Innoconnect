<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Liste des Contrats - InnoConnect</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f8f9fa;
      margin: 0;
      padding: 40px;
    }

    .container {
      max-width: 1100px;
      margin: auto;
      background-color: #fff;
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 0 15px rgba(0,0,0,0.05);
    }

    h2 {
      text-align: center;
      color: #6f42c1;
      margin-bottom: 30px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      border-radius: 8px;
      overflow: hidden;
    }

    th, td {
      padding: 16px;
      text-align: left;
      border-bottom: 1px solid #ddd;
      vertical-align: middle;
    }

    th {
      background-color: #6f42c1;
      color: #fff;
    }

    tr:hover {
      background-color: #f1f1f1;
    }

    .badge {
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 14px;
      display: inline-block;
      min-width: 80px;
      text-align: center;
    }

    .badge.signe {
      background-color: #198754;
      color: white;
    }

    .badge.attente {
      background-color: #ffc107;
      color: #000;
    }

    .btn {
      padding: 8px 14px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      transition: background 0.3s;
    }

    .btn.view {
      background-color: #6610f2;
      color: white;
    }

    .btn.download {
      background-color: #6c757d;
      color: white;
    }

    .btn.delete {
      background-color: #dc3545;
      color: white;
      border-radius: 0;  /* Carré pour la suppression */
    }

    .btn.modify {
      background-color: #ffc107;
      color: white;
      border-radius: 0;  /* Carré pour la modification */
    }

    .btn.add {
      background-color: #28a745;
      color: white;
      margin-top: 20px;
    }

    .btn:hover {
      opacity: 0.9;
    }

    .action-buttons {
      display: flex;
      gap: 6px;
    }

    .form-container {
      margin-bottom: 20px;
      background-color: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .form-container input, .form-container select {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 8px;
      border: 1px solid #ddd;
    }

    @media (max-width: 768px) {
      table, thead, tbody, th, td, tr {
        display: block;
      }

      th {
        display: none;
      }

      td {
        position: relative;
        padding-left: 50%;
        border-bottom: 1px solid #ccc;
      }

      td::before {
        content: attr(data-label);
        position: absolute;
        left: 16px;
        font-weight: bold;
        color: #6f42c1;
      }
    }
  </style>
</head>
<body>

  <div class="container">
    <h2>Liste des Contrats de Financement</h2>

    <!-- Formulaire d'ajout et de modification de contrat -->
    <div class="form-container">
      <h3>Ajouter / Modifier un contrat</h3>
      <form id="contractForm">
        <label for="innovateur">Innovateur :</label>
        <input type="text" id="innovateur" name="innovateur" required placeholder="Nom de l'innovateur">

        <label for="idInnovateur">ID Innovateur :</label>
        <input type="text" id="idInnovateur" name="idInnovateur" required placeholder="ID de l'innovateur">

        <label for="investisseur">Investisseur :</label>
        <input type="text" id="investisseur" name="investisseur" required placeholder="Nom de l'investisseur">

        <label for="idInvestisseur">ID Investisseur :</label>
        <input type="text" id="idInvestisseur" name="idInvestisseur" required placeholder="ID de l'investisseur">

        <label for="montant">Montant (€) :</label>
        <input type="number" id="montant" name="montant" required placeholder="Montant du financement">

        <label for="date">Date :</label>
        <input type="date" id="date" name="date" required>

        <label for="statut">Statut :</label>
        <select id="statut" name="statut">
          <option value="attente">En attente</option>
          <option value="signe">Signé</option>
        </select>

        <button type="submit" class="btn add">Ajouter le contrat</button>
        <button type="button" class="btn update" style="display:none;" id="updateButton">Mettre à jour le contrat</button>
      </form>
    </div>

    <table id="contractTable">
      <thead>
        <tr>
          <th>ID Innovateur</th>
          <th>Innovateur</th>
          <th>ID Investisseur</th>
          <th>Investisseur</th>
          <th>Montant (€)</th>
          <th>Date</th>
          <th>Statut</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <!-- Les contrats ajoutés seront ici -->
      </tbody>
    </table>

  </div>

  <script>
    let editingRow = null;

    // Ajouter un contrat
    document.getElementById('contractForm').addEventListener('submit', function(e) {
      e.preventDefault(); // Empêche la soumission du formulaire par défaut

      const innovateur = document.getElementById('innovateur').value;
      const idInnovateur = document.getElementById('idInnovateur').value;
      const investisseur = document.getElementById('investisseur').value;
      const idInvestisseur = document.getElementById('idInvestisseur').value;
      const montant = document.getElementById('montant').value;
      const date = document.getElementById('date').value;
      const statut = document.getElementById('statut').value;

      const table = document.getElementById('contractTable').getElementsByTagName('tbody')[0];

      const newRow = table.insertRow();
      newRow.innerHTML = `
        <td>${idInnovateur}</td>
        <td>${innovateur}</td>
        <td>${idInvestisseur}</td>
        <td>${investisseur}</td>
        <td>${montant}</td>
        <td>${date}</td>
        <td><span class="badge ${statut === 'attente' ? 'attente' : 'signe'}">${statut === 'attente' ? 'En attente' : 'Signé'}</span></td>
        <td>
          <div class="action-buttons">
            <button class="btn view" onclick="viewContract(this)">Voir</button>
            <button class="btn download" onclick="downloadContract(this)">Télécharger</button>
            <button class="btn delete" onclick="deleteContract(this)">Supprimer</button>
            <button class="btn modify" onclick="editContract(this)">Modifier</button>
          </div>
        </td>
      `;

      // Réinitialisation du formulaire
      document.getElementById('contractForm').reset();
      document.querySelector('.btn.update').style.display = 'none';
      document.querySelector('.btn.add').style.display = 'inline-block';
    });

    // Voir un contrat
    function viewContract(button) {
      const row = button.closest('tr');
      const cells = row.getElementsByTagName('td');
      alert(`Détails du contrat:\n
        Innovateur: ${cells[1].textContent}\n
        Investisseur: ${cells[3].textContent}\n
        Montant: ${cells[4].textContent}€\n
        Date: ${cells[5].textContent}\n
        Statut: ${cells[6].textContent}`);
    }

    // Télécharger un contrat
    function downloadContract(button) {
      alert('Téléchargement du contrat...');
    }

    // Supprimer un contrat
    function deleteContract(button) {
      const row = button.closest('tr');
      row.remove();
    }

    // Modifier un contrat
    function editContract(button) {
      editingRow = button.closest('tr');
      const cells = editingRow.getElementsByTagName('td');

      document.getElementById('idInnovateur').value = cells[0].textContent;
      document.getElementById('innovateur').value = cells[1].textContent;
      document.getElementById('idInvestisseur').value = cells[2].textContent;
      document.getElementById('investisseur').value = cells[3].textContent;
      document.getElementById('montant').value = cells[4].textContent;
      document.getElementById('date').value = cells[5].textContent;
      document.getElementById('statut').value = cells[6].textContent.trim().toLowerCase();

      document.querySelector('.btn.add').style.display = 'none';
      document.querySelector('.btn.update').style.display = 'inline-block';
    }

    // Mettre à jour un contrat
    document.getElementById('updateButton').addEventListener('click', function() {
      const innovateur = document.getElementById('innovateur').value;
      const idInnovateur = document.getElementById('idInnovateur').value;
      const investisseur = document.getElementById('investisseur').value;
      const idInvestisseur = document.getElementById('idInvestisseur').value;
      const montant = document.getElementById('montant').value;
      const date = document.getElementById('date').value;
      const statut = document.getElementById('statut').value;

      editingRow.cells[0].textContent = idInnovateur;
      editingRow.cells[1].textContent = innovateur;
      editingRow.cells[2].textContent = idInvestisseur;
      editingRow.cells[3].textContent = investisseur;
      editingRow.cells[4].textContent = montant;
      editingRow.cells[5].textContent = date;
      editingRow.cells[6].textContent = statut === 'attente' ? 'En attente' : 'Signé';

      const badge = editingRow.querySelector('.badge');
      badge.classList = ['badge'];
      badge.classList.add(statut === 'attente' ? 'attente' : 'signe');
      badge.textContent = statut === 'attente' ? 'En attente' : 'Signé';

      document.querySelector('.btn.update').style.display = 'none';
      document.querySelector('.btn.add').style.display = 'inline-block';

      // Réinitialisation du formulaire
      document.getElementById('contractForm').reset();
    });
  </script>

</body>
</html>
